var c=Object.defineProperty;var g=(n,s,t)=>s in n?c(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t;var i=(n,s,t)=>(g(n,typeof s!="symbol"?s+"":s,t),t);import{p as d,B as u,d as w}from"./ButtonView-Cdq7Z-Gm.js";import{B as r,C as m,W as b,E as f}from"./index-BBwHIxAf.js";import{I as a}from"./InputView-T_GTZj1F.js";const C="_form_hlrtd_1",L={form:C},_="_label_xewfv_1",x="_errorMsg_xewfv_8",p={label:_,errorMsg:x};class l extends r{constructor(t,e){super({className:p.label,tagName:"label",textContent:t},e);i(this,"errorMsg");i(this,"inputComp");this.inputComp=e,this.errorMsg=d("",p.errorMsg),this.addChildrenComponents("end",this.errorMsg),this.initListeners()}setParameters(t){super.setParameters(t);const{htmlFor:e}=t;e&&(this.element.htmlFor=e)}initListeners(){this.element.addEventListener(m.FormInput,()=>{if(this.inputComp.checkValid())this.errorMsg.setTextContent("");else{let t="";this.inputComp.checkTooShort()&&(t+=`${this.inputComp.getName()[0].toUpperCase()+this.inputComp.getName().slice(1)||"Value"} must contain at least ${this.inputComp.getMinLength()} characters, you typed ${this.inputComp.getValue().length}.`),this.inputComp.checkPatternMismatch()&&(t+=t?"<br>":"",t+=this.inputComp.patternMessage),this.errorMsg.setInnerHTML(t)}})}}class I extends r{constructor(){super({tagName:"form",className:L.form,novalidate:!0});i(this,"loginInput");i(this,"passwordInput");i(this,"loginButton");i(this,"socket",b.getInstance());this.loginInput=new a({type:"text",name:"login",required:!0,pattern:"^[0-9A-Za-z\\-_]{3,16}$",minLength:3},"Login must contain only English letters, digits, hyphen or underscore (max 15 symbols)"),this.passwordInput=new a({type:"password",name:"password",required:!0,pattern:"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$",minLength:8},"Password must contain at least 1 uppercase and 1 lowercase English letter and a digit"),this.loginButton=new u({type:"submit",textContent:"Log in",disabled:!0}),this.addChildrenComponents("end",new l("Login",this.loginInput),new l("Password",this.passwordInput),this.loginButton),this.initListeners()}setParameters(t){super.setParameters(t);const{novalidate:e}=t;e&&(this.element.noValidate=e)}initListeners(){this.initSubmitListener(),this.initFormInputListener()}initSubmitListener(){this.element.addEventListener(f.Submit,t=>{t.preventDefault();const e=this.loginInput.getValue(),h=this.passwordInput.getValue();this.socket.sendLoginRequest(e,h)})}initFormInputListener(){this.element.addEventListener(m.FormInput,()=>{this.element.checkValidity()?this.loginButton.getElement().disabled=!1:this.loginButton.getElement().disabled=!0})}}const v="_page_6wqxl_1",B="_formWrapper_6wqxl_18",M="_aboutButton_6wqxl_23",o={page:v,formWrapper:B,aboutButton:M};class P extends r{constructor(){super({tagName:"div",className:o.page},w(o.formWrapper,new I),new u({type:"button",textContent:"About the app",className:o.aboutButton},"about"))}}export{P as default};
