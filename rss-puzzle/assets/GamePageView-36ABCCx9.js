var w=Object.defineProperty;var x=(o,r,e)=>r in o?w(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e;var l=(o,r,e)=>(x(o,typeof r!="symbol"?r+"":r,e),e);import{C as s,B as a,_ as h}from"./index-BESkSA-X.js";import{H as k}from"./HeaderView-CuWTJPGr.js";import{B as L,d as S}from"./ButtonView-BuTTQMkp.js";const y="_container_gqcmt_1",O={container:y},T="_button_47333_1",D={button:T};class N extends L{constructor(){super(D.button,"button","Auto-Complete"),this.initClickListener()}initClickListener(){this.element.addEventListener("click",()=>{this.element.dispatchEvent(new CustomEvent(s.AutoComplete,{bubbles:!0}))})}}const B="_button_14p0z_1",F="_primary_14p0z_18",R="_disabled_14p0z_25",C={button:B,primary:F,disabled:R,continue:"_continue_14p0z_40"};class A extends L{constructor(e){super(C.button,"button","Check",void 0,!0);l(this,"levels");l(this,"currentLevelIndex",0);l(this,"isContinue",!1);this.levels=e,this.initClickListener()}transformToContinue(){this.element.disabled&&(this.element.disabled=!1),this.setTextContent("Continue"),this.addClass(C.continue),this.isContinue=!0}initClickListener(){this.element.addEventListener("click",()=>{this.isContinue?this.currentLevelIndex!==this.levels.length-1?this.continueToNextRound():this.element.dispatchEvent(new CustomEvent(s.NextLevel,{bubbles:!0})):this.element.dispatchEvent(new CustomEvent(s.CheckSolution,{bubbles:!0}))})}continueToNextRound(){this.isContinue=!1,this.setTextContent("Check"),this.currentLevelIndex+=1,this.element.dispatchEvent(new CustomEvent(s.NextRound,{bubbles:!0,detail:this.levels[this.currentLevelIndex]})),this.element.disabled=!0}}const M="_option_1ej7f_1",$="_correct_1ej7f_18",V="_wrong_1ej7f_22",H="_completed_1ej7f_26",I="_clone_1ej7f_32",c={option:M,correct:$,wrong:V,completed:H,clone:I},X="_field_184gy_1",P="_buttons_184gy_19",Y="_droppable_184gy_24",u={field:X,buttons:P,droppable:Y};class m extends a{constructor(e,t){super({tagName:"div",className:c.option,textContent:e});l(this,"shiftX");l(this,"shiftY");l(this,"clone");this.initDragEvent();const n=t.split(" ").join("").length;this.element.style.width=`${e.length/n*100}%`}initDragEvent(){this.element.addEventListener("mousedown",e=>{this.element.ondragstart=()=>!1,this.shiftX=e.clientX-this.element.getBoundingClientRect().left,this.shiftY=e.clientY-this.element.getBoundingClientRect().top,this.createElementClone(),this.moveCloneAt(e.pageX,e.pageY);const t=this.getDroppableUnderClone(e),n=this.getOptionUnderClone(e),i=d=>{this.moveCloneAt(d.pageX,d.pageY)};document.addEventListener("pointermove",i),document.onpointerup=d=>{document.removeEventListener("pointermove",i),this.drop(d,t,n),document.onpointerup=null}})}createElementClone(){this.clone=this.element.cloneNode(!0),this.clone.classList.add(c.clone),this.clone.style.position="absolute",this.clone.style.zIndex="1000",document.body.append(this.clone)}moveCloneAt(e,t){if(this.clone){const n=this.clone.getBoundingClientRect();if(e<=0+(this.shiftX??0)||t<=0+(this.shiftY??0)||e>=document.documentElement.clientWidth-n.width+(this.shiftX??0)||t>=document.documentElement.clientHeight-n.height+(this.shiftY??0))return;this.clone instanceof HTMLElement&&this.shiftX&&this.shiftY&&(this.clone.style.left=`${e-this.shiftX}px`,this.clone.style.top=`${t-this.shiftY}px`)}}getDroppableUnderClone(e){if(this.clone instanceof HTMLElement){this.clone.style.display="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(this.clone.style.display="flex",!t)return null;const n=t.closest(`.${u.droppable}`);if(n instanceof HTMLElement)return n}return null}getOptionUnderClone(e){if(this.clone instanceof HTMLElement){this.clone.style.display="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(this.clone.style.display="flex",!t)return null;const n=t.closest(`.${c.option}`);if(n instanceof HTMLElement)return n}return null}drop(e,t,n){if(this.clone instanceof HTMLElement){const i=this.getDroppableUnderClone(e),d=this.getOptionUnderClone(e);if(this.clone.remove(),this.clone=null,n===d){this.element.dispatchEvent(new MouseEvent("click",{bubbles:!0}));return}if(t===i&&i){this.dropToTheSameDroppaple(e,i,d);return}i&&this.dropToNewDroppable(i)}}dropToTheSameDroppaple(e,t,n){if(this.element.dispatchEvent(new CustomEvent(s.OptionsDefaultStyle,{bubbles:!0})),n){const i=n.getBoundingClientRect();i.right-e.clientX<e.clientX-i.left?n.after(this.element):n.before(this.element)}else{const i=t.getBoundingClientRect();i.right-e.clientX<e.clientX-i.left?t.append(this.element):t.prepend(this.element)}}dropToNewDroppable(e){this.element.dispatchEvent(new CustomEvent(s.DropOption,{bubbles:!0,detail:e}))}}const j="_field_1mpwo_1",z={field:j};class f extends a{constructor(e,t){super({tagName:"div",className:`${z.field} ${u.droppable}`});l(this,"checkContinueButton");this.renderOptions(e,t),this.initClickListener()}renderOptions(e,t){this.removeChildrenComponents(),e.forEach(n=>this.addChildrenComponents("end",new m(n,t)))}initClickListener(){this.element.addEventListener("click",async e=>{const{target:t}=e;t instanceof HTMLDivElement&&t.classList.contains(c.option)&&(t.dispatchEvent(new CustomEvent(s.MoveOption,{bubbles:!0,detail:{source:this}})),await this.removeChildComponent(t),this.children.length===0&&this.element.dispatchEvent(new CustomEvent(s.EnableCheckButton,{bubbles:!0})))})}}const U="_sentence_rvld9_1",G="_completed_rvld9_9",g={sentence:U,completed:G};class p extends a{constructor(e){super({tagName:"div",className:`${g.sentence} ${u.droppable}`});l(this,"correctSolution");l(this,"solutionArr");this.correctSolution=e,this.solutionArr=this.correctSolution.split(" "),this.initClickListener(),console.log(e)}isInRightOrder(){return[...this.element.children].map(t=>t.textContent).join(" ")===this.correctSolution}checkSentenceElements(){[...this.element.children].forEach((e,t)=>{e.textContent===this.solutionArr[t]?e.classList.add(c.correct):e.classList.add(c.wrong)})}showCorrectOrder(){this.solutionArr.forEach((e,t)=>{const n=this.children.find(i=>i.getElement().textContent===e);if(n){const i=n.getElement();i.style.order=String(t)}})}initClickListener(){this.element.onclick=e=>{const{target:t}=e;t instanceof HTMLDivElement&&t.classList.contains(c.option)&&(this.children.forEach(n=>{n.removeClass(c.correct),n.removeClass(c.wrong)}),t.dispatchEvent(new CustomEvent(s.MoveOption,{bubbles:!0,detail:{source:this}})),this.removeChildComponent(t))}}}const W="_field_m5jmk_1",q={field:W};class Q extends a{constructor(e){super({tagName:"div",className:q.field},void 0,new p(e));l(this,"optionsField")}}function v(o){return[...o].sort(()=>Math.random()-.5)}class E extends a{constructor(e){const t=new Q(e.words[0].textExample);super({tagName:"div",className:u.field},void 0,t);l(this,"optionsField");l(this,"solutionField");l(this,"checkContinueButton");this.solutionField=t;const n=e.words[0].textExample.split(" "),i=v(n);this.optionsField=new f(i,e.words[0].textExample),this.solutionField.optionsField=this.optionsField,this.checkContinueButton=new A(e.words),this.optionsField.checkContinueButton=this.checkContinueButton,this.addChildrenComponents("end",this.optionsField,S(u.buttons,void 0,this.checkContinueButton,new N)),this.initListeners()}initListeners(){this.initMoveOptionListener(),this.initCheckSolutionListener(),this.initNextRoundListener(),this.initEnableCheckButtonListener(),this.initAutoCompleteListener(),this.initDropOptionListener(),this.initOptionsDefaultStyleListener()}initMoveOptionListener(){this.element.addEventListener(s.MoveOption,async e=>{if(e instanceof CustomEvent){const{target:t,detail:n}=e,i=this.getLastSentence();n.source instanceof p&&t instanceof HTMLDivElement?await this.optionsField.addChildrenComponents("end",new m(t.textContent||"",i.correctSolution)):n.source instanceof f&&t instanceof HTMLDivElement&&await i.addChildrenComponents("end",new m(t.textContent||"",i.correctSolution)),this.optionsField.children.length?this.checkContinueButton.getElement().disabled=!0:this.checkContinueButton.getElement().disabled=!1}})}initCheckSolutionListener(){this.element.addEventListener(s.CheckSolution,()=>{const e=this.getLastSentence();e.checkSentenceElements(),e.isInRightOrder()&&this.checkContinueButton.transformToContinue()})}initNextRoundListener(){this.element.addEventListener(s.NextRound,e=>{if(e instanceof CustomEvent){const t=this.getLastSentence();t.getElement().onclick=()=>!1,t.getElement().style.pointerEvents="none",t.removeClass(u.droppable),t.addClass(g.completed),t.children.forEach(b=>b.addClass(c.completed));const{detail:n}=e,i=n.textExample.split(" "),d=v(i);this.optionsField.renderOptions(d,n.textExample),this.solutionField.addChildrenComponents("end",new p(n.textExample))}})}initEnableCheckButtonListener(){this.element.addEventListener(s.EnableCheckButton,()=>{this.checkContinueButton.getElement().disabled=!1})}initAutoCompleteListener(){this.element.addEventListener(s.AutoComplete,async()=>{const e=this.getLastSentence(),t=[...this.optionsField.children];await this.optionsField.removeChildrenComponents(),await e.addChildrenComponents("end",...t),e.showCorrectOrder(),e.getElement().style.pointerEvents="none",this.checkContinueButton.transformToContinue()})}initDropOptionListener(){this.element.addEventListener(s.DropOption,e=>{if(e instanceof CustomEvent){const{target:t,detail:n}=e;if(n&&t instanceof HTMLElement){const i=this.getLastSentence();n===i.getElement()?(this.optionsField.removeChildComponent(t),i.addChildrenComponents("end",new m(t.textContent||"",i.correctSolution))):n===this.optionsField.getElement()&&(i.removeChildComponent(t),this.optionsField.addChildrenComponents("end",new m(t.textContent||"",i.correctSolution)))}}})}initOptionsDefaultStyleListener(){this.element.addEventListener(s.OptionsDefaultStyle,()=>{this.getLastSentence().children.forEach(t=>{t.removeClass(c.wrong),t.removeClass(c.correct)})})}getLastSentence(){return this.solutionField.children[this.solutionField.children.length-1]}}const _=[h(()=>import("./wordCollectionLevel1-BrvB1y9S.js"),__vite__mapDeps([]),import.meta.url),h(()=>import("./wordCollectionLevel2-DyXVy7uF.js"),__vite__mapDeps([]),import.meta.url),h(()=>import("./wordCollectionLevel3-CMPSuVGM.js"),__vite__mapDeps([]),import.meta.url),h(()=>import("./wordCollectionLevel4-CYyDBtv_.js"),__vite__mapDeps([]),import.meta.url),h(()=>import("./wordCollectionLevel5-BSb-_qYR.js"),__vite__mapDeps([]),import.meta.url),h(()=>import("./wordCollectionLevel6-HiwIvisc.js"),__vite__mapDeps([]),import.meta.url)];class J extends a{constructor(){super({tagName:"div",className:O.container},void 0);l(this,"currentLevel");this.currentLevel=0,this.returnRound(this.currentLevel).then(e=>this.addChildrenComponents("end",new E(e.rounds[0]))),this.initListeners()}initListeners(){this.initNextLevelListener()}initNextLevelListener(){this.element.addEventListener(s.NextLevel,()=>{this.currentLevel<_.length&&(this.removeChildrenComponents(),this.currentLevel+=1,this.returnRound(this.currentLevel).then(e=>this.addChildrenComponents("end",new E(e.rounds[0]))))})}async returnRound(e){this.addChild(document.createElement("div"));const{default:t}=await _[e];return t}}const K="_page_yvahx_1",Z={page:K};class se extends a{constructor(){super({tagName:"div",className:Z.page},void 0,new k,new J)}}export{se as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
