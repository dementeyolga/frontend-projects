var w=Object.defineProperty;var x=(i,c,e)=>c in i?w(i,c,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[c]=e;var l=(i,c,e)=>(x(i,typeof c!="symbol"?c+"":c,e),e);import{C as o,B as h,_ as u}from"./index-CuBk2Hoq.js";import{H as k}from"./HeaderView-wqpfgFYO.js";import{B as b,d as y}from"./ButtonView-8X0bOX1e.js";const S="_container_gqcmt_1",B={container:S};function f(i){return[...i].sort(()=>Math.random()-.5)}const O="_button_47333_1",F={button:O};class T extends b{constructor(){super(F.button,"button","Auto-Complete"),this.initClickListener()}initClickListener(){this.element.addEventListener("click",()=>{this.element.dispatchEvent(new CustomEvent(o.AutoComplete,{bubbles:!0}))})}}const D="_button_14p0z_1",N="_primary_14p0z_18",A="_disabled_14p0z_25",v={button:D,primary:N,disabled:A,continue:"_continue_14p0z_40"};class V extends b{constructor(e){super(v.button,"button","Check",void 0,!0);l(this,"levels");l(this,"currentLevelIndex",0);l(this,"isContinue",!1);this.levels=e,this.initClickListener()}transformToContinue(){this.element.disabled&&(this.element.disabled=!1),this.setTextContent("Continue"),this.addClass(v.continue),this.isContinue=!0}initClickListener(){this.element.addEventListener("click",()=>{this.isContinue?this.currentLevelIndex!==this.levels.length-1?(this.isContinue=!1,this.setTextContent("Check"),this.currentLevelIndex+=1,this.element.dispatchEvent(new CustomEvent(o.NextRound,{bubbles:!0,detail:this.levels[this.currentLevelIndex]})),this.element.disabled=!0):this.element.dispatchEvent(new CustomEvent(o.NextLevel,{bubbles:!0})):this.element.dispatchEvent(new CustomEvent(o.CheckSolution,{bubbles:!0}))})}}const $="_option_2c07g_1",M="_correct_2c07g_18",R="_wrong_2c07g_22",H="_completed_2c07g_26",I="_clone_2c07g_32",d={option:$,correct:M,wrong:R,completed:H,clone:I},P="_field_5hgyw_1",X="_buttons_5hgyw_19",Y="_droppable_5hgyw_24",m={field:P,buttons:X,droppable:Y};class p extends h{constructor(e,t){super({tagName:"div",className:d.option,textContent:e});l(this,"shiftX");l(this,"shiftY");l(this,"clone");this.initDragEvent();const n=t.split(" ").join("").length;this.element.style.width=`${e.length/n*100}%`}initDragEvent(){this.element.addEventListener("mousedown",e=>{this.element.ondragstart=()=>!1,this.shiftX=e.clientX-this.element.getBoundingClientRect().left,this.shiftY=e.clientY-this.element.getBoundingClientRect().top,this.clone=this.element.cloneNode(!0),this.clone.classList.add(d.clone),this.clone.style.position="absolute",this.clone.style.zIndex="1000",document.body.append(this.clone),this.moveCloneAt(e.pageX,e.pageY);const t=this.getDroppableUnderClone(e),n=this.getOptionUnderClone(e),s=r=>{this.moveCloneAt(r.pageX,r.pageY)};document.addEventListener("pointermove",s),document.onpointerup=r=>{document.removeEventListener("pointermove",s),this.drop(r,t,n),document.onpointerup=null}})}moveCloneAt(e,t){e<=0||t<=0||e>=document.documentElement.clientWidth||t>=document.documentElement.clientHeight||this.clone instanceof HTMLElement&&this.shiftX&&this.shiftY&&(this.clone.style.left=`${e-this.shiftX}px`,this.clone.style.top=`${t-this.shiftY}px`)}getDroppableUnderClone(e){if(this.clone instanceof HTMLElement){this.clone.style.display="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(this.clone.style.display="flex",!t)return null;const n=t.closest(`.${m.droppable}`);if(n instanceof HTMLElement)return n}return null}getOptionUnderClone(e){if(this.clone instanceof HTMLElement){this.clone.style.display="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(this.clone.style.display="flex",!t)return null;const n=t.closest(`.${d.option}`);if(n instanceof HTMLElement)return n}return null}drop(e,t,n){if(this.clone instanceof HTMLElement){const s=this.getDroppableUnderClone(e),r=this.getOptionUnderClone(e);if(this.clone.remove(),this.clone=null,n===r){this.element.dispatchEvent(new MouseEvent("click",{bubbles:!0}));return}if(t===s&&s){if(this.element.dispatchEvent(new CustomEvent(o.OptionsDefaultStyle,{bubbles:!0})),r){const a=r.getBoundingClientRect();a.right-e.clientX<e.clientX-a.left?r.after(this.element):r.before(this.element)}else{const a=s.getBoundingClientRect();a.right-e.clientX<e.clientX-a.left?s.append(this.element):s.prepend(this.element)}return}s&&this.element.dispatchEvent(new CustomEvent(o.DropOption,{bubbles:!0,detail:s}))}}}const U="_field_1mpwo_1",z={field:U};class E extends h{constructor(e,t){super({tagName:"div",className:`${z.field} ${m.droppable}`});l(this,"checkContinueButton");this.renderOptions(e,t),this.initClickListener()}renderOptions(e,t){this.removeChildrenComponents(),e.forEach(n=>this.addChildrenComponents("end",new p(n,t)))}initClickListener(){this.element.addEventListener("click",async e=>{const{target:t}=e;console.log("target",t),t instanceof HTMLDivElement&&t.classList.contains(d.option)&&(t.dispatchEvent(new CustomEvent(o.MoveOption,{bubbles:!0,detail:{source:this}})),await this.removeChildComponent(t),this.children.length===0&&this.element.dispatchEvent(new CustomEvent(o.EnableCheckButton,{bubbles:!0})))})}}const j="_sentence_1jgan_1",L={sentence:j};class C extends h{constructor(e){super({tagName:"div",className:`${L.sentence} ${m.droppable}`});l(this,"correctSolution");l(this,"solutionArr");this.correctSolution=e,this.solutionArr=this.correctSolution.split(" "),this.initClickListener(),console.log(e)}isInRightOrder(){return[...this.element.children].map(t=>t.textContent).join(" ")===this.correctSolution}checkSentenceElements(){[...this.element.children].forEach((e,t)=>{e.textContent===this.solutionArr[t]?e.classList.add(d.correct):e.classList.add(d.wrong)})}showCorrectOrder(){this.solutionArr.forEach((e,t)=>{const n=this.children.find(s=>s.getElement().textContent===e);if(n){const s=n.getElement();s.style.order=String(t)}})}initClickListener(){this.element.onclick=e=>{const{target:t}=e;t instanceof HTMLDivElement&&t.classList.contains(d.option)&&(this.children.forEach(n=>{n.removeClass(d.correct),n.removeClass(d.wrong)}),t.dispatchEvent(new CustomEvent(o.MoveOption,{bubbles:!0,detail:{source:this}})),this.removeChildComponent(t))}}}const G="_field_m5jmk_1",W={field:G};class q extends h{constructor(e){super({tagName:"div",className:W.field},void 0,new C(e));l(this,"optionsField")}}class _ extends h{constructor(e){const t=new q(e.words[0].textExample);super({tagName:"div",className:m.field},void 0,t);l(this,"optionsField");l(this,"solutionField");l(this,"checkContinueButton");this.solutionField=t;const n=e.words[0].textExample.split(" "),s=f(n);this.optionsField=new E(s,e.words[0].textExample),this.solutionField.optionsField=this.optionsField,this.checkContinueButton=new V(e.words),this.optionsField.checkContinueButton=this.checkContinueButton,this.addChildrenComponents("end",this.optionsField,y(m.buttons,void 0,this.checkContinueButton,new T)),this.initListeners()}initListeners(){this.element.addEventListener(o.MoveOption,e=>{if(e instanceof CustomEvent){const{target:t,detail:n}=e,s=this.getLastSentence();n.source instanceof C&&t instanceof HTMLDivElement?(this.checkContinueButton.getElement().disabled||(this.checkContinueButton.getElement().disabled=!0),this.optionsField.addChildrenComponents("end",new p(t.textContent||"",s.correctSolution))):n.source instanceof E&&t instanceof HTMLDivElement&&s.addChildrenComponents("end",new p(t.textContent||"",s.correctSolution))}}),this.element.addEventListener(o.CheckSolution,()=>{const e=this.getLastSentence();e.checkSentenceElements(),e.isInRightOrder()&&this.checkContinueButton.transformToContinue()}),this.element.addEventListener(o.NextRound,e=>{if(e instanceof CustomEvent){const t=this.getLastSentence();t.getElement().onclick=()=>!1,t.getElement().style.pointerEvents="none",t.removeClass(m.droppable),t.addClass(L.completed),t.children.forEach(a=>a.addClass(d.completed));const{detail:n}=e,s=n.textExample.split(" "),r=f(s);this.optionsField.renderOptions(r,n.textExample),this.solutionField.addChildrenComponents("end",new C(n.textExample))}}),this.element.addEventListener(o.EnableCheckButton,()=>{this.checkContinueButton.getElement().disabled=!1}),this.element.addEventListener(o.AutoComplete,async()=>{const e=this.getLastSentence(),t=[...this.optionsField.children];await this.optionsField.removeChildrenComponents(),await e.addChildrenComponents("end",...t),e.showCorrectOrder(),e.getElement().style.pointerEvents="none",this.checkContinueButton.transformToContinue()}),this.element.addEventListener(o.DropOption,e=>{if(e instanceof CustomEvent){const{target:t,detail:n}=e;if(n&&t instanceof HTMLElement){const s=this.getLastSentence();n===s.getElement()?(this.optionsField.removeChildComponent(t),s.addChildrenComponents("end",new p(t.textContent||"",s.correctSolution))):n===this.optionsField.getElement()&&(s.removeChildComponent(t),this.optionsField.addChildrenComponents("end",new p(t.textContent||"",s.correctSolution)))}}}),this.element.addEventListener(o.OptionsDefaultStyle,()=>{this.getLastSentence().children.forEach(t=>{t.removeClass(d.wrong),t.removeClass(d.correct)})})}getLastSentence(){return this.solutionField.children[this.solutionField.children.length-1]}}const g=[u(()=>import("./wordCollectionLevel1-BrvB1y9S.js"),__vite__mapDeps([]),import.meta.url),u(()=>import("./wordCollectionLevel2-DyXVy7uF.js"),__vite__mapDeps([]),import.meta.url),u(()=>import("./wordCollectionLevel3-CMPSuVGM.js"),__vite__mapDeps([]),import.meta.url),u(()=>import("./wordCollectionLevel4-CYyDBtv_.js"),__vite__mapDeps([]),import.meta.url),u(()=>import("./wordCollectionLevel5-BSb-_qYR.js"),__vite__mapDeps([]),import.meta.url),u(()=>import("./wordCollectionLevel6-HiwIvisc.js"),__vite__mapDeps([]),import.meta.url)];class Q extends h{constructor(){super({tagName:"div",className:B.container},void 0);l(this,"currentLevel");this.currentLevel=0,this.returnRound(this.currentLevel).then(e=>this.addChildrenComponents("end",new _(e.rounds[0]))),this.initListeners()}initListeners(){this.element.addEventListener("next-level",()=>{this.currentLevel<g.length&&(this.removeChildrenComponents(),this.currentLevel+=1,this.returnRound(this.currentLevel).then(e=>this.addChildrenComponents("end",new _(e.rounds[0]))))})}async returnRound(e){this.addChild(document.createElement("div"));const{default:t}=await g[e];return t}}const J="_page_yvahx_1",K={page:J};class se extends h{constructor(){super({tagName:"div",className:K.page},void 0,new k,new Q)}}export{se as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
