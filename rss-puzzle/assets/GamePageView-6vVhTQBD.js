var b=Object.defineProperty;var L=(o,r,e)=>r in o?b(o,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[r]=e;var l=(o,r,e)=>(L(o,typeof r!="symbol"?r+"":r,e),e);import{C as c,B as a,_ as u}from"./index-YVTBpArZ.js";import{H as x}from"./HeaderView-gYnuK_nZ.js";import{B as w,d as k}from"./ButtonView-BdRT4Tx5.js";const F="_container_gqcmt_1",y={container:F};function f(o){return[...o].sort(()=>Math.random()-.5)}const B={};class O extends w{constructor(){super(B.button,"button","Auto-Complete"),this.initClickListener()}initClickListener(){this.element.addEventListener("click",()=>{this.element.dispatchEvent(new CustomEvent(c.AutoComplete,{bubbles:!0}))})}}const T="_button_14p0z_1",N="_primary_14p0z_18",A="_disabled_14p0z_25",E={button:T,primary:N,disabled:A,continue:"_continue_14p0z_40"};class D extends w{constructor(e){super(E.button,"button","Check",void 0,!0);l(this,"levels");l(this,"currentLevelIndex",0);l(this,"isContinue",!1);this.levels=e,this.initClickListener()}transformToContinue(){this.element.disabled&&(this.element.disabled=!1),this.setTextContent("Continue"),this.addClass(E.continue),this.isContinue=!0}initClickListener(){this.element.addEventListener("click",()=>{this.isContinue?this.currentLevelIndex!==this.levels.length-1?(this.isContinue=!1,this.setTextContent("Check"),this.currentLevelIndex+=1,this.element.dispatchEvent(new CustomEvent(c.NextRound,{bubbles:!0,detail:this.levels[this.currentLevelIndex]})),this.element.disabled=!0):this.element.dispatchEvent(new CustomEvent(c.NextLevel,{bubbles:!0})):this.element.dispatchEvent(new CustomEvent(c.CheckSolution,{bubbles:!0}))})}}const M="_option_1i0og_1",S="_correct_1i0og_15",V="_wrong_1i0og_19",$="_clone_1i0og_24",d={option:M,correct:S,wrong:V,clone:$},R="_field_5hgyw_1",H="_buttons_5hgyw_19",I="_droppable_5hgyw_24",m={field:R,buttons:H,droppable:I};class p extends a{constructor(e,t){super({tagName:"div",className:d.option,textContent:e});l(this,"shiftX");l(this,"shiftY");l(this,"clone");this.initDragEvent();const n=t.split(" ").join("").length;this.element.style.width=`${e.length/n*100}%`}initDragEvent(){this.element.addEventListener("mousedown",e=>{this.element.ondragstart=()=>!1,this.shiftX=e.clientX-this.element.getBoundingClientRect().left,this.shiftY=e.clientY-this.element.getBoundingClientRect().top,this.clone=this.element.cloneNode(!0),this.clone.classList.add(d.clone),this.clone.style.position="absolute",this.clone.style.zIndex="1000",document.body.append(this.clone),this.moveCloneAt(e.pageX,e.pageY);const t=this.getDroppableUnderClone(e),n=this.getOptionUnderClone(e),i=s=>{this.moveCloneAt(s.pageX,s.pageY)};document.addEventListener("pointermove",i),document.onpointerup=s=>{document.removeEventListener("pointermove",i),this.drop(s,t,n),document.onpointerup=null}})}moveCloneAt(e,t){e<=0||t<=0||e>=document.documentElement.clientWidth||t>=document.documentElement.clientHeight||this.clone instanceof HTMLElement&&this.shiftX&&this.shiftY&&(this.clone.style.left=`${e-this.shiftX}px`,this.clone.style.top=`${t-this.shiftY}px`)}getDroppableUnderClone(e){if(this.clone instanceof HTMLElement){this.clone.style.display="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(this.clone.style.display="flex",!t)return null;const n=t.closest(`.${m.droppable}`);if(n instanceof HTMLElement)return n}return null}getOptionUnderClone(e){if(this.clone instanceof HTMLElement){this.clone.style.display="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(this.clone.style.display="flex",!t)return null;const n=t.closest(`.${d.option}`);if(n instanceof HTMLElement)return n}return null}drop(e,t,n){if(console.log(this.clone instanceof HTMLElement),this.clone instanceof HTMLElement){const i=this.getDroppableUnderClone(e),s=this.getOptionUnderClone(e);if(console.log("option",n,s),this.clone.remove(),this.clone=null,n===s){this.element.dispatchEvent(new MouseEvent("click",{bubbles:!0}));return}if(t===i&&i){if(s){const h=s.getBoundingClientRect();h.right-e.clientX<e.clientX-h.left?s.after(this.element):s.before(this.element)}else{const h=i.getBoundingClientRect();h.right-e.clientX<e.clientX-h.left?i.append(this.element):i.prepend(this.element)}return}i&&(console.log("enter a new droppable"),this.element.dispatchEvent(new CustomEvent(c.DropOption,{bubbles:!0,detail:i})))}}}const P="_field_1i8gw_1",X={field:P};class v extends a{constructor(e,t){super({tagName:"div",className:`${X.field} ${m.droppable}`});l(this,"checkContinueButton");this.renderOptions(e,t),this.initClickListener()}renderOptions(e,t){this.removeChildrenComponents(),e.forEach(n=>this.addChildrenComponents("end",new p(n,t)))}initClickListener(){this.element.addEventListener("click",async e=>{const{target:t}=e;console.log("target",t),t instanceof HTMLDivElement&&t.classList.contains(d.option)&&(t.dispatchEvent(new CustomEvent(c.MoveOption,{bubbles:!0,detail:{source:this}})),await this.removeChildComponent(t),this.children.length===0&&this.element.dispatchEvent(new CustomEvent(c.EnableCheckButton,{bubbles:!0})))})}}const Y="_sentence_16eqk_1",U={sentence:Y};class C extends a{constructor(e){super({tagName:"div",className:`${U.sentence} ${m.droppable}`});l(this,"correctSolution");l(this,"solutionArr");this.correctSolution=e,this.solutionArr=this.correctSolution.split(" "),this.initClickListener(),console.log(e)}isInRightOrder(){return this.children.map(t=>t.getElement().textContent).join(" ")===this.correctSolution}checkSentenceElements(){this.children.forEach((e,t)=>{const n=e.getElement();n.textContent===this.solutionArr[t]?n.classList.add(d.correct):n.classList.add(d.wrong)})}showCorrectOrder(){this.solutionArr.forEach((e,t)=>{const n=this.children.find(i=>i.getElement().textContent===e);if(n){const i=n.getElement();i.style.order=String(t)}})}initClickListener(){this.element.onclick=e=>{const{target:t}=e;t instanceof HTMLDivElement&&t.classList.contains(d.option)&&(this.children.forEach(n=>{n.removeClass(d.correct),n.removeClass(d.wrong)}),t.dispatchEvent(new CustomEvent(c.MoveOption,{bubbles:!0,detail:{source:this}})),this.removeChildComponent(t))}}}const z="_field_1wepw_1",G={field:z};class j extends a{constructor(e){super({tagName:"div",className:G.field},void 0,new C(e));l(this,"optionsField")}}class g extends a{constructor(e){const t=new j(e.words[0].textExample);super({tagName:"div",className:m.field},void 0,t);l(this,"optionsField");l(this,"solutionField");l(this,"checkContinueButton");this.solutionField=t;const n=e.words[0].textExample.split(" "),i=f(n);this.optionsField=new v(i,e.words[0].textExample),this.solutionField.optionsField=this.optionsField,this.checkContinueButton=new D(e.words),this.optionsField.checkContinueButton=this.checkContinueButton,this.addChildrenComponents("end",this.optionsField,k(m.buttons,void 0,this.checkContinueButton,new O)),this.initListeners(e.words[0].textExample)}initListeners(e){this.element.addEventListener(c.MoveOption,t=>{if(t instanceof CustomEvent){const{target:n,detail:i}=t;i.source instanceof C&&n instanceof HTMLDivElement?(this.checkContinueButton.getElement().disabled||(this.checkContinueButton.getElement().disabled=!0),this.optionsField.addChildrenComponents("end",new p(n.textContent||"",e))):i.source instanceof v&&n instanceof HTMLDivElement&&this.solutionField.children[this.solutionField.children.length-1].addChildrenComponents("end",new p(n.textContent||"",e))}}),this.element.addEventListener(c.CheckSolution,()=>{const t=this.solutionField.children[this.solutionField.children.length-1];t.checkSentenceElements(),t.isInRightOrder()&&this.checkContinueButton.transformToContinue()}),this.element.addEventListener(c.NextRound,t=>{if(t instanceof CustomEvent){const n=this.solutionField.children[this.solutionField.children.length-1];n.getElement().onclick=()=>!1,n.getElement().style.pointerEvents="none",n.removeClass(m.droppable);const{detail:i}=t,s=i.textExample.split(" "),h=f(s);this.optionsField.renderOptions(h,i.textExample),this.solutionField.addChildrenComponents("end",new C(i.textExample))}}),this.element.addEventListener(c.EnableCheckButton,()=>{this.checkContinueButton.getElement().disabled=!1}),this.element.addEventListener(c.AutoComplete,async()=>{const t=this.solutionField.children[this.solutionField.children.length-1],n=[...this.optionsField.children];await this.optionsField.removeChildrenComponents(),await t.addChildrenComponents("end",...n),t.showCorrectOrder(),t.getElement().style.pointerEvents="none",this.checkContinueButton.transformToContinue()}),this.element.addEventListener(c.DropOption,t=>{if(t instanceof CustomEvent){const{target:n,detail:i}=t;if(i&&n instanceof HTMLElement){const s=this.solutionField.children[this.solutionField.children.length-1];i===s.getElement()?(this.optionsField.removeChildComponent(n),s.addChildrenComponents("end",new p(n.textContent||"",s.correctSolution))):i===this.optionsField.getElement()&&(s.removeChildComponent(n),this.optionsField.addChildrenComponents("end",new p(n.textContent||"",s.correctSolution)))}}})}}const _=[u(()=>import("./wordCollectionLevel1-BrvB1y9S.js"),__vite__mapDeps([]),import.meta.url),u(()=>import("./wordCollectionLevel2-DyXVy7uF.js"),__vite__mapDeps([]),import.meta.url),u(()=>import("./wordCollectionLevel3-CMPSuVGM.js"),__vite__mapDeps([]),import.meta.url),u(()=>import("./wordCollectionLevel4-CYyDBtv_.js"),__vite__mapDeps([]),import.meta.url),u(()=>import("./wordCollectionLevel5-BSb-_qYR.js"),__vite__mapDeps([]),import.meta.url),u(()=>import("./wordCollectionLevel6-HiwIvisc.js"),__vite__mapDeps([]),import.meta.url)];class q extends a{constructor(){super({tagName:"div",className:y.container},void 0);l(this,"currentLevel");this.currentLevel=0,this.returnRound(this.currentLevel).then(e=>this.addChildrenComponents("end",new g(e.rounds[0]))),this.initListeners()}initListeners(){this.element.addEventListener("next-level",()=>{this.currentLevel<_.length&&(this.removeChildrenComponents(),this.currentLevel+=1,this.returnRound(this.currentLevel).then(e=>this.addChildrenComponents("end",new g(e.rounds[0]))))})}async returnRound(e){this.addChild(document.createElement("div"));const{default:t}=await _[e];return t}}const W="_page_yvahx_1",Q={page:W};class te extends a{constructor(){super({tagName:"div",className:Q.page},void 0,new x,new q)}}export{te as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
